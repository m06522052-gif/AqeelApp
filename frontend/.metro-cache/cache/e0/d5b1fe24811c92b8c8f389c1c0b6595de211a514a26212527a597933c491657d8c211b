{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-sqlite","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"QiSBWdXsWfNLYLVy2O3EksR8vJg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"initDatabase\", {\n    enumerable: true,\n    get: function () {\n      return initDatabase;\n    }\n  });\n  Object.defineProperty(exports, \"getDatabase\", {\n    enumerable: true,\n    get: function () {\n      return getDatabase;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoSqlite = require(_dependencyMap[1], \"expo-sqlite\");\n  var SQLite = _interopNamespace(_expoSqlite);\n  var initDatabase = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* () {\n      var db = yield SQLite.openDatabaseAsync('abdulsalam.db');\n\n      // جدول المستخدمين\n      yield db.execAsync(`\n    CREATE TABLE IF NOT EXISTS users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      username TEXT NOT NULL UNIQUE,\n      email TEXT NOT NULL UNIQUE,\n      phone TEXT,\n      password TEXT NOT NULL,\n      role TEXT DEFAULT 'user',\n      is_active INTEGER DEFAULT 1,\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP\n    );\n  `);\n\n      // جدول المخازن\n      yield db.execAsync(`\n    CREATE TABLE IF NOT EXISTS warehouses (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT NOT NULL,\n      location TEXT,\n      type TEXT NOT NULL,\n      responsible TEXT,\n      status INTEGER DEFAULT 1,\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP\n    );\n  `);\n\n      // جدول الدفعات\n      yield db.execAsync(`\n    CREATE TABLE IF NOT EXISTS batches (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      batch_number TEXT NOT NULL UNIQUE,\n      supplier TEXT NOT NULL,\n      receive_date TEXT NOT NULL,\n      bag_type TEXT NOT NULL,\n      quantity INTEGER NOT NULL,\n      price REAL NOT NULL,\n      responsible TEXT,\n      warehouse_id INTEGER,\n      notes TEXT,\n      status TEXT DEFAULT 'active',\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (warehouse_id) REFERENCES warehouses (id)\n    );\n  `);\n\n      // جدول العمال\n      yield db.execAsync(`\n    CREATE TABLE IF NOT EXISTS workers (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT NOT NULL,\n      phone TEXT,\n      address TEXT,\n      registration_date TEXT NOT NULL,\n      status TEXT DEFAULT 'active',\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP\n    );\n  `);\n\n      // جدول التوزيع\n      yield db.execAsync(`\n    CREATE TABLE IF NOT EXISTS distributions (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      distribution_number TEXT NOT NULL UNIQUE,\n      worker_id INTEGER NOT NULL,\n      batch_id INTEGER NOT NULL,\n      quantity INTEGER NOT NULL,\n      distribution_date TEXT NOT NULL,\n      expected_completion_date TEXT,\n      status TEXT DEFAULT 'pending',\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (worker_id) REFERENCES workers (id),\n      FOREIGN KEY (batch_id) REFERENCES batches (id)\n    );\n  `);\n\n      // جدول الإنتاج\n      yield db.execAsync(`\n    CREATE TABLE IF NOT EXISTS production (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      distribution_id INTEGER NOT NULL,\n      quantity INTEGER NOT NULL,\n      production_date TEXT NOT NULL,\n      quality TEXT NOT NULL,\n      warehouse_id INTEGER,\n      notes TEXT,\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (distribution_id) REFERENCES distributions (id),\n      FOREIGN KEY (warehouse_id) REFERENCES warehouses (id)\n    );\n  `);\n\n      // جدول المدفوعات\n      yield db.execAsync(`\n    CREATE TABLE IF NOT EXISTS payments (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      worker_id INTEGER NOT NULL,\n      distribution_id INTEGER,\n      amount REAL NOT NULL,\n      payment_date TEXT NOT NULL,\n      payment_method TEXT NOT NULL,\n      notes TEXT,\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (worker_id) REFERENCES workers (id),\n      FOREIGN KEY (distribution_id) REFERENCES distributions (id)\n    );\n  `);\n\n      // جدول حركات المخزون\n      yield db.execAsync(`\n    CREATE TABLE IF NOT EXISTS inventory_movements (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      movement_type TEXT NOT NULL,\n      from_warehouse_id INTEGER,\n      to_warehouse_id INTEGER,\n      batch_id INTEGER,\n      quantity INTEGER NOT NULL,\n      responsible TEXT,\n      notes TEXT,\n      movement_date TEXT NOT NULL,\n      created_at TEXT DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (from_warehouse_id) REFERENCES warehouses (id),\n      FOREIGN KEY (to_warehouse_id) REFERENCES warehouses (id),\n      FOREIGN KEY (batch_id) REFERENCES batches (id)\n    );\n  `);\n\n      // إدراج مستخدم افتراضي للتجربة\n      try {\n        yield db.runAsync('INSERT OR IGNORE INTO users (username, email, password, role) VALUES (?, ?, ?, ?)', 'admin', 'admin@abdulsalam.com', 'admin123', 'admin');\n      } catch (e) {\n        console.log('Default user already exists');\n      }\n      return db;\n    });\n    return function initDatabase() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var getDatabase = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* () {\n      return yield SQLite.openDatabaseAsync('abdulsalam.db');\n    });\n    return function getDatabase() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n});","lineCount":194,"map":[[27,2,3,0,"Object"],[27,8,3,0],[27,9,3,0,"defineProperty"],[27,23,3,0],[27,24,3,0,"exports"],[27,31,3,0],[28,4,3,0,"enumerable"],[28,14,3,0],[29,4,3,0,"get"],[29,7,3,0],[29,18,3,0,"get"],[29,19,3,0],[30,6,3,0],[30,13,3,0,"initDatabase"],[30,25,3,0],[31,4,3,0],[32,2,3,0],[33,2,146,0,"Object"],[33,8,146,0],[33,9,146,0,"defineProperty"],[33,23,146,0],[33,24,146,0,"exports"],[33,31,146,0],[34,4,146,0,"enumerable"],[34,14,146,0],[35,4,146,0,"get"],[35,7,146,0],[35,18,146,0,"get"],[35,19,146,0],[36,6,146,0],[36,13,146,0,"getDatabase"],[36,24,146,0],[37,4,146,0],[38,2,146,0],[39,2,148,2],[39,6,148,2,"_babelRuntimeHelpersAsyncToGenerator"],[39,42,148,2],[39,45,148,2,"require"],[39,52,148,2],[39,53,148,2,"_dependencyMap"],[39,67,148,2],[40,2,148,2],[40,6,148,2,"_asyncToGenerator"],[40,23,148,2],[40,26,148,2,"_interopDefault"],[40,41,148,2],[40,42,148,2,"_babelRuntimeHelpersAsyncToGenerator"],[40,78,148,2],[41,2,1,0],[41,6,1,0,"_expoSqlite"],[41,17,1,0],[41,20,1,0,"require"],[41,27,1,0],[41,28,1,0,"_dependencyMap"],[41,42,1,0],[42,2,1,0],[42,6,1,0,"SQLite"],[42,12,1,0],[42,15,1,0,"_interopNamespace"],[42,32,1,0],[42,33,1,0,"_expoSqlite"],[42,44,1,0],[43,2,3,7],[43,6,3,13,"initDatabase"],[43,18,3,25],[44,4,3,25],[44,8,3,25,"_ref"],[44,12,3,25],[44,19,3,25,"_asyncToGenerator"],[44,36,3,25],[44,37,3,25,"default"],[44,44,3,25],[44,46,3,28],[44,59,3,40],[45,6,4,2],[45,10,4,8,"db"],[45,12,4,10],[45,21,4,19,"SQLite"],[45,27,4,25],[45,28,4,26,"openDatabaseAsync"],[45,45,4,43],[45,46,4,44],[45,61,4,59],[45,62,4,60],[47,6,6,2],[48,6,7,2],[48,12,7,8,"db"],[48,14,7,10],[48,15,7,11,"execAsync"],[48,24,7,20],[48,25,7,21],[49,0,8,0],[50,0,9,0],[51,0,10,0],[52,0,11,0],[53,0,12,0],[54,0,13,0],[55,0,14,0],[56,0,15,0],[57,0,16,0],[58,0,17,0],[59,0,18,0],[59,3,18,3],[59,4,18,4],[61,6,20,2],[62,6,21,2],[62,12,21,8,"db"],[62,14,21,10],[62,15,21,11,"execAsync"],[62,24,21,20],[62,25,21,21],[63,0,22,0],[64,0,23,0],[65,0,24,0],[66,0,25,0],[67,0,26,0],[68,0,27,0],[69,0,28,0],[70,0,29,0],[71,0,30,0],[72,0,31,0],[72,3,31,3],[72,4,31,4],[74,6,33,2],[75,6,34,2],[75,12,34,8,"db"],[75,14,34,10],[75,15,34,11,"execAsync"],[75,24,34,20],[75,25,34,21],[76,0,35,0],[77,0,36,0],[78,0,37,0],[79,0,38,0],[80,0,39,0],[81,0,40,0],[82,0,41,0],[83,0,42,0],[84,0,43,0],[85,0,44,0],[86,0,45,0],[87,0,46,0],[88,0,47,0],[89,0,48,0],[90,0,49,0],[91,0,50,0],[91,3,50,3],[91,4,50,4],[93,6,52,2],[94,6,53,2],[94,12,53,8,"db"],[94,14,53,10],[94,15,53,11,"execAsync"],[94,24,53,20],[94,25,53,21],[95,0,54,0],[96,0,55,0],[97,0,56,0],[98,0,57,0],[99,0,58,0],[100,0,59,0],[101,0,60,0],[102,0,61,0],[103,0,62,0],[104,0,63,0],[104,3,63,3],[104,4,63,4],[106,6,65,2],[107,6,66,2],[107,12,66,8,"db"],[107,14,66,10],[107,15,66,11,"execAsync"],[107,24,66,20],[107,25,66,21],[108,0,67,0],[109,0,68,0],[110,0,69,0],[111,0,70,0],[112,0,71,0],[113,0,72,0],[114,0,73,0],[115,0,74,0],[116,0,75,0],[117,0,76,0],[118,0,77,0],[119,0,78,0],[120,0,79,0],[121,0,80,0],[121,3,80,3],[121,4,80,4],[123,6,82,2],[124,6,83,2],[124,12,83,8,"db"],[124,14,83,10],[124,15,83,11,"execAsync"],[124,24,83,20],[124,25,83,21],[125,0,84,0],[126,0,85,0],[127,0,86,0],[128,0,87,0],[129,0,88,0],[130,0,89,0],[131,0,90,0],[132,0,91,0],[133,0,92,0],[134,0,93,0],[135,0,94,0],[136,0,95,0],[137,0,96,0],[137,3,96,3],[137,4,96,4],[139,6,98,2],[140,6,99,2],[140,12,99,8,"db"],[140,14,99,10],[140,15,99,11,"execAsync"],[140,24,99,20],[140,25,99,21],[141,0,100,0],[142,0,101,0],[143,0,102,0],[144,0,103,0],[145,0,104,0],[146,0,105,0],[147,0,106,0],[148,0,107,0],[149,0,108,0],[150,0,109,0],[151,0,110,0],[152,0,111,0],[153,0,112,0],[153,3,112,3],[153,4,112,4],[155,6,114,2],[156,6,115,2],[156,12,115,8,"db"],[156,14,115,10],[156,15,115,11,"execAsync"],[156,24,115,20],[156,25,115,21],[157,0,116,0],[158,0,117,0],[159,0,118,0],[160,0,119,0],[161,0,120,0],[162,0,121,0],[163,0,122,0],[164,0,123,0],[165,0,124,0],[166,0,125,0],[167,0,126,0],[168,0,127,0],[169,0,128,0],[170,0,129,0],[171,0,130,0],[172,0,131,0],[172,3,131,3],[172,4,131,4],[174,6,133,2],[175,6,134,2],[175,10,134,6],[176,8,135,4],[176,14,135,10,"db"],[176,16,135,12],[176,17,135,13,"runAsync"],[176,25,135,21],[176,26,136,6],[176,109,136,89],[176,111,137,6],[176,118,137,13],[176,120,137,15],[176,142,137,37],[176,144,137,39],[176,154,137,49],[176,156,137,51],[176,163,138,4],[176,164,138,5],[177,6,139,2],[177,7,139,3],[177,8,139,4],[177,15,139,11,"e"],[177,16,139,12],[177,18,139,14],[178,8,140,4,"console"],[178,15,140,11],[178,16,140,12,"log"],[178,19,140,15],[178,20,140,16],[178,49,140,45],[178,50,140,46],[179,6,141,2],[180,6,143,2],[180,13,143,9,"db"],[180,15,143,11],[181,4,144,0],[181,5,144,1],[182,4,144,1],[182,20,3,13,"initDatabase"],[182,32,3,25,"initDatabase"],[182,33,3,25],[183,6,3,25],[183,13,3,25,"_ref"],[183,17,3,25],[183,18,3,25,"apply"],[183,23,3,25],[183,30,3,25,"arguments"],[183,39,3,25],[184,4,3,25],[185,2,3,25],[185,5,144,1],[186,2,146,7],[186,6,146,13,"getDatabase"],[186,17,146,24],[187,4,146,24],[187,8,146,24,"_ref2"],[187,13,146,24],[187,20,146,24,"_asyncToGenerator"],[187,37,146,24],[187,38,146,24,"default"],[187,45,146,24],[187,47,146,27],[187,60,146,39],[188,6,147,2],[188,19,147,15,"SQLite"],[188,25,147,21],[188,26,147,22,"openDatabaseAsync"],[188,43,147,39],[188,44,147,40],[188,59,147,55],[188,60,147,56],[189,4,148,0],[189,5,148,1],[190,4,148,1],[190,20,146,13,"getDatabase"],[190,31,146,24,"getDatabase"],[190,32,146,24],[191,6,146,24],[191,13,146,24,"_ref2"],[191,18,146,24],[191,19,146,24,"apply"],[191,24,146,24],[191,31,146,24,"arguments"],[191,40,146,24],[192,4,146,24],[193,2,146,24],[193,5,148,1],[194,0,148,2],[194,3]],"functionMap":{"names":["<global>","initDatabase","getDatabase"],"mappings":"AAA;4BCE;CD6I;2BEE;CFE"},"hasCjsExports":false},"type":"js/module"}]}